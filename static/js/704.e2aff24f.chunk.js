"use strict";(self.webpackChunkgraphwear=self.webpackChunkgraphwear||[]).push([[704],{8704:(e,t,o)=>{o.r(t),o.d(t,{default:()=>k});var a=o(5043),r=o(3216),n=o(5472);const s=(0,o(7064).Wp)({apiKey:"AIzaSyDgHlTPj49gm-TFuh0SrzIUhmq-pYw-ifw",authDomain:"graphware-1761f.firebaseapp.com",projectId:"graphware-1761f",storageBucket:"graphware-1761f.firebasestorage.app",messagingSenderId:"975460401347",appId:"1:975460401347:web:f863efc8eb9a5b066c2276",measurementId:"G-ZRCBDTJ827"}),l=(0,n.aU)(s);var i=o(522),c=o(579);const d=e=>{let{children:t,header:o=" ",onEdit:a,isDisable:r=!1,disableReason:n="Not Allowed"}=e;return(0,c.jsxs)("div",{className:"w-full bg-white px-4 md:px-8 rounded-xl",children:[o&&(0,c.jsxs)("div",{className:"flex items-end gap-[5px] mb-8",children:[(0,c.jsx)("h2",{className:"font-bold text-xl md:text-2xl",children:o}),a&&(0,c.jsx)("p",{className:"text-xl font-bold "+(r?"cursor-not-allowed text-gray-500":"cursor-pointer text-accent hover:text-amber-700 duration-100"),onClick:r?()=>{}:a,title:r?n:"",children:"(edit)"})]}),t]})};var u=o(3969),m=o(4995),p=o(7310),f=o(2378),g=o(2228),h=o(3082);const x={xs:"10px",sm:"11px",md:"12px",lg:"13px",xl:"14px"},b=e=>{var t,o;let{tableData:r,columns:n,keyName:s="id",handleBottomButton:l=()=>{},showBottomButton:i=!1,showFullScreenOption:d=!0,initialState:b={},newButtonName:v="Save",paginationProps:w={rowsPerPageOptions:[5],showRowsPerPage:!1},onRowClick:S=null,enablePagination:y=!0,enableColumnOrdering:j=!1,enableHiding:M=!1,enableColumnResizing:T=!1,maxHeight:N="auto",isBottomButtonDisable:C=!1,renderPanel:P=null,topButton:I={showTopButton:!1,handleTopButton:()=>{},value:0}}=e;const B=(0,a.useRef)(null),A=(0,p.A)({components:{MuiIconButton:{styleOverrides:{root:{"& .MuiSvgIcon-root":{color:"#707070 !important"}}}},MuiTableSortLabel:{styleOverrides:{root:{"& .MuiSvgIcon-root":{color:"#707070 !important"},"&:hover .MuiSvgIcon-root":{color:"#ffffff !important"},"&.Mui-active .MuiSvgIcon-root":{color:"#707070 !important"}}}}}}),D=(0,g.Up)({columns:n,data:r,getRowId:e=>e[s],initialState:{density:"compact",...b},enableColumnActions:!0,enableDensityToggle:!1,enableFilters:!0,enableHiding:M,enableStickyHeader:!0,enableStickyFooter:!0,enablePagination:y,enableFullScreenToggle:d,enableTopToolbar:!0,enableBottomToolbar:!0,enableColumnOrdering:j,enableColumnResizing:T,maxHeight:N,...y?{paginationDisplayMode:"pages"}:{enableRowVirtualization:!0,rowVirtualizerInstanceRef:B,rowVirtualizerOptions:{overscan:5}},muiTableHeadCellProps:{sx:{fontWeight:"bolder",fontSize:x,".MuiDivider-root":{borderWidth:"1px",opacity:"0.5"}}},muiTablePaperProps:{elevation:0,sx:{height:"100%",display:"flex",flexDirection:"column",padding:"5px"}},muiTableContainerProps:{sx:{height:"auto",maxHeight:N}},muiTableBodyProps:{sx:()=>({fontSize:x})},muiBottomToolbarProps:{sx:{...!i&&{justifyContent:"end"}}},muiTopToolbarProps:{sx:{...!I.showTopButton&&{justifyContent:"end"}}},renderBottomToolbarCustomActions:()=>i&&(0,c.jsx)(h.A,{isPrimaryButton:!0,onClick:l,disabled:C,children:v}),renderTopToolbarCustomActions:e=>{let{table:t}=e;const o=t.getFilteredRowModel().rows.map((e=>e.original));return(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[I.showTopButton&&(0,c.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2 h-[39.94px] cursor-pointer",onClick:I.handleTopButton,children:[(0,c.jsx)("input",{type:"checkbox",className:"cursor-pointer",checked:I.value,readOnly:!0}),(0,c.jsx)("span",{className:"text-sm text-primary",children:"(Select All)"})]}),(0,c.jsx)(f.CSVLink,{data:o,filename:"filtered_table_data.csv",className:"bg-blue-500 hover:bg-blue-600 text-white text-sm px-3 py-1.5 rounded",children:"Download CSV"})]})},...S&&{muiTableBodyRowProps:e=>{let{row:t}=e;return{onClick:e=>S(t),sx:{cursor:"pointer"}}}},muiPaginationProps:{rowsPerPageOptions:null!==(t=null===w||void 0===w?void 0:w.rowsPerPageOptions)&&void 0!==t?t:[5],showFirstButton:!1,showLastButton:!1,showRowsPerPage:null!==(o=null===w||void 0===w?void 0:w.showRowsPerPage)&&void 0!==o&&o,siblingCount:0,size:"small"},...P&&{renderDetailPanel:e=>{let{row:t}=e;return(0,c.jsx)(u.A,{sx:{width:"100%"},children:P(t)})}}});return(0,c.jsx)(m.A,{theme:A,children:(0,c.jsx)(g.zp,{table:D})})},v="MM/dd/yyyy HH:mm:ss",w=e=>{const t=e.match(/(.*) \((.*)\)/);return t?(0,c.jsxs)("div",{className:"flex items-center gap-[5px]",children:[(0,c.jsx)("h3",{className:"font-bold",children:t[1]}),(0,c.jsxs)("span",{children:["(",t[2],")"]})]}):(0,c.jsx)("h3",{className:"font-bold",children:e})},S=((0,p.A)({components:{MuiIconButton:{styleOverrides:{root:{"& .MuiSvgIcon-root":{color:"#ffffff !important"},"&:hover .MuiSvgIcon-root":{color:"#ffffff !important"},"&.Mui-active .MuiSvgIcon-root":{color:"#ffffff !important"}}}},MuiTableSortLabel:{styleOverrides:{root:{"& .MuiSvgIcon-root":{color:"#ffffff !important"},"&:hover .MuiSvgIcon-root":{color:"#ffffff !important"},"&.Mui-active .MuiSvgIcon-root":{color:"#ffffff !important"}}}}}}),(0,p.A)({components:{MuiIconButton:{styleOverrides:{root:{"& .MuiSvgIcon-root":{color:"#707070 !important"}}}},MuiTableSortLabel:{styleOverrides:{root:{"& .MuiSvgIcon-root":{color:"#707070 !important"},"&:hover .MuiSvgIcon-root":{color:"#ffffff !important"},"&.Mui-active .MuiSvgIcon-root":{color:"#707070 !important"}}}}}}),(e,t,o)=>{var a;const r=e.getValue(t);return null!==(a=null===r||void 0===r?void 0:r.includes(o))&&void 0!==a&&a}),y=(e,t)=>{if(!e)return"";const o=new Date(e),a=6e4*o.getTimezoneOffset(),r=new Date(o.getTime()+a);return t===v?`${(r.getMonth()+1).toString().padStart(2,"0")}/${r.getDate().toString().padStart(2,"0")}/${r.getFullYear()} ${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}:${r.getSeconds().toString().padStart(2,"0")}`:"yyyy-MM-dd"===t?`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}-${r.getDate().toString().padStart(2,"0")}`:"MM/dd/yyyy"===t?r.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):void 0},j=e=>{let{data:t}=e;const o=function(e,o){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=((e,t)=>{if("string"===typeof e)return e.trim().length>0&&"null"!==e;if("object"!==typeof e||null===e)return!1;if(!(t in e))return!1;const o=e[t];return null!==o&&void 0!==o&&("string"!==typeof o||o.trim().length>0)})(t,o);return"timestamp"===o&&(t[o]=y(t[o],v)),(0,c.jsxs)("div",{className:`flex flex-col ${a}`,children:[(0,c.jsx)("h3",{className:"font-bold",children:w(e)}),(0,c.jsx)("p",{className:`px-.5 py-2 font-normal ${r?"text-gray-500":"text-red-600"} whitespace-nowrap`,children:r?`${null===t||void 0===t?void 0:t[o]}`:"Missing"})]})};return(0,c.jsx)(d,{header:"Data Packet Information",children:(0,c.jsxs)("div",{className:"grid xl:grid-cols-[repeat(4,1fr)] min-[1092px]:grid-cols-[repeat(3,1fr)] sm:grid-cols-[repeat(2,1fr)] gap-x-3 gap-y-0 ",children:[o("User","user_name"),o("Sensor","sensor_id"),o("Timestamp","timestamp"),(0,c.jsx)("hr",{className:"col-[1/-1] my-2"}),o("Lactate (Raw 1)","raw1"),o("Lactate (Raw 2)","raw2"),o("Lactate (Raw 3)","raw3"),(0,c.jsx)("hr",{className:"col-[1/-1] my-2"}),o("Ohm 1","ohm1"),o("Ohm 2","ohm2"),o("Ohm 3","ohm3"),(0,c.jsx)("hr",{className:"col-[1/-1] my-2"}),o("Temperature","temperature"),o("Connection Status","connection_status_flag"),o("Charging Status","charging_status_flag"),o("Touch Status","touch_status_flag"),o("Insertion Status","insertion_status_flag"),o("Flag 4","flag4"),o("Flag 5","flag5"),o("Flag 6","flag6"),o("Gain 0","gain0"),o("Gain 1","gain1"),o("Gain 2","gain2"),o("Offset 0","offset0"),o("Offset 1","offset1"),o("offset 2","offset2"),o("Header 1","header1"),o("Header 2","header2")]})})};var M=o(256),T=o(9067),N=o(7203),C=o(2485),P=o(7471),I=o(8865),B=o(6185),A=o(4343),D=o(5273),O=o(446),R=o.n(O);const k=()=>{const{setModal:e}=(0,r.KC)(),[t,o]=(0,a.useState)(!0),[s,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)([]),[g,h]=(0,a.useState)([]),[x,w]=(0,a.useState)([]),[O,k]=(0,a.useState)([]),[F,_]=(0,a.useState)(null);(0,a.useEffect)((()=>{const e=(0,n.aQ)((0,n.rJ)(l,"lactate_data"),(e=>{const t=[];e.docChanges().forEach((e=>{const o={id:e.doc.id,...e.doc.data()};"added"===e.type&&t.unshift(o)})),f((e=>{const o=[...t,...e],a=new Set(o.map((e=>e.user_name)).filter(Boolean));return w(Array.from(a)),o})),m(!1),o(!1)}),(e=>{console.error("Error fetching real-time data:",e),m(!0),o(!1)}));return()=>e()}),[]),(0,a.useEffect)((()=>{let e=[...p];if(O.length>0&&(e=e.filter((e=>O.includes(e.user_name)))),F){const t=R()(F).valueOf();e=e.filter((e=>new Date(e.timestamp).getTime()>=t))}h(e)}),[p,O,F]);const z=[{accessorKey:"user_name",header:"User Name",size:50},{accessorKey:"sensor_id",header:"Sensor"},{accessorKey:"raw1",header:"Lactate(Raw 1)"},{accessorKey:"raw2",header:"Lactate(Raw 2)"},{accessorKey:"raw3",header:"Lactate(Raw 3)"},{accessorKey:"timestamp",header:"Timestamp",Cell:e=>{let{cell:t}=e;const o=t.getValue();return o?y(o,v):(0,c.jsx)("p",{className:"px-.5 font-normal text-red-600 whitespace-nowrap",children:"Missing"})},filterFn:S}];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"py-8 flex flex-col space-y-2 md:items-baseline md:flex-row md:justify-between",children:(0,c.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"All Sensor Data"})}),(0,c.jsxs)(u.A,{className:"flex flex-wrap gap-4 mb-4",children:[(0,c.jsxs)(M.A,{sx:{minWidth:250},children:[(0,c.jsx)(T.A,{children:"User Name"}),(0,c.jsx)(N.A,{multiple:!0,value:O,onChange:e=>k(e.target.value),input:(0,c.jsx)(C.A,{label:"User Name"}),renderValue:e=>e.join(", "),children:x.map((e=>(0,c.jsxs)(P.A,{value:e,children:[(0,c.jsx)(I.A,{checked:O.indexOf(e)>-1}),(0,c.jsx)(B.A,{primary:e})]},e)))})]}),(0,c.jsx)(D.K,{label:"From Date",value:F,onChange:_,renderInput:e=>(0,c.jsx)(A.A,{...e})})]}),t?(0,c.jsx)(d,{children:(0,c.jsx)(i.k,{size:"40px",className:"h-[223px]"})}):s?(0,c.jsx)(d,{children:(0,c.jsx)("p",{className:"text-red-500",children:"Failed to load data."})}):(0,c.jsx)(b,{tableData:g,columns:z,maxHeight:"420px",onRowClick:t=>{e({content:(0,c.jsx)(j,{data:t.original}),size:"modalFull"})}})]})}}}]);
//# sourceMappingURL=704.e2aff24f.chunk.js.map